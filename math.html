<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=1024">
  <title>math</title>
  <link rel="stylesheet" type="text/css" href="css/index.css">
  <script src="js/generic.js"></script>
  <script src="js/globals.js"></script>
  <script src="js/main.js"></script>
</head>
<body>
	<br>

	<table id="tb2">
		<col width="25%"><col width="75%">
		<thead><tr><th colspan="2">math</th></tr></thead>

		<tr><td>[all] hash</td><td class="c mono" id="hash0"></td></tr>
		<tr><td>[function] hash</td><td class="c mono" id="hash1"></td></tr>
		<tr><td>[polyfill] hash</td><td class="c mono" id="hash2"></td></tr>
		<tr><td>data<br><br>
				<button class="btn2 btn" onClick="copyclip(`mathdata`)">[ copy to clipboard ]</button></td>
			<td class="c mono spaces" id="mathdata"></td></tr>
	</table>
	<br>

<script>
'use strict';

function outputMath() {

		let mT = sg+ " true" + sc,
			mF = sb + "false" +sc,
			mN = "   n/a"

		let test10 = Math.log((1.5) / (.5)) / 2 // atanh(0.5)
		let test20 = Math.exp(1) - 1 // expm1(1)
		let y = Math.exp(1)
		let test46 = (y - 1 / y) / 2 // sinh(1)


		// testing creep
		let n = 0.123
		let bigN = 5.860847362277284e+38
		let fns = [
			['acos', [n], 0],
			['acos', [Math.SQRT1_2], 1],
			['acosh', [1e308], 2],
			['acosh', [Math.PI], 3],
			['acosh', [Math.SQRT2], 4],
			['asin', [n], 5],
			['asinh', [1e300], 6],
			['asinh', [Math.PI], 7],
			['atan', [2], 8],
			['atan', [Math.PI], 9],
			['atanh', [0.5], 10, test10],
			['atan2', [1e-310, 2], 11],
			['atan2', [Math.PI, 2], 12],
			['cbrt', [100], 13],
			['cbrt', [Math.PI], 14],
			['cos', [n], 15],
			['cos', [Math.PI], 16],
			['cos', [bigN],17], // creep says unique in Tor
			['cosh', [1],18],
			['cosh', [Math.PI], 19],
			['expm1', [1],20, test20],
			['expm1', [Math.PI], 21],
			['exp', [n], 22],
			['exp', [Math.PI], 23],
			['hypot', [1, 2, 3, 4, 5, 6], 24],
			['hypot', [bigN, bigN], 25],
			['log', [n], 26],
			['log', [Math.PI], 27],
			['log1p', [n], 28],
			['log1p', [Math.PI], 29],
			['log10', [n], 30],
			['log10', [Math.PI], 31],
			['log10', [Math.E], 32],
			['log10', [Math.LN2], 33],
			['log10', [Math.LOG2E], 34],
			['log10', [Math.LOG10E], 35],
			['log10', [Math.SQRT1_2], 36],
			['log10', [Math.SQRT2], 37],
			['sin', [bigN], 38], // creep says unique in Tor
			['sin', [Math.PI], 39], // creep says unique in Tor
			['sin', [Math.E], 40],
			['sin', [Math.LN2], 41],
			['sin', [Math.LOG2E], 42],
			['sin', [Math.LOG10E], 43],
			['sin', [Math.SQRT1_2], 44],
			['sin', [Math.SQRT2], 45],
			['sinh', [1], 46, test46],
			['sinh', [Math.PI], 47],
			['sinh', [Math.E], 48],
			['sinh', [Math.LN2], 49],
			['sinh', [Math.LOG2E], 50],
			['sinh', [Math.LOG10E], 51],
			['sinh', [Math.SQRT1_2], 52],
			['sinh', [Math.SQRT2], 53],
			['sqrt', [n], 54],
			['sqrt', [Math.PI], 55],
			['tan', [-1e308], 56],
			['tan', [Math.PI], 57],
			['tanh', [n], 58],
			['tanh', [Math.PI], 59],
			['pow', [n, -100], 60],
			['pow', [Math.PI, -100], 61],
			['pow', [Math.E, -100], 62],
			['pow', [Math.LN2, -100], 63],
			['pow', [Math.LN10, -100], 64],
			['pow', [Math.LOG2E, -100], 65],
			['pow', [Math.LOG10E, -100], 66],
			['pow', [Math.SQRT1_2, -100], 67],
			['pow', [Math.SQRT2, -100], 68]
		]

		let math0 = [], math1 = [], math2 = []
		let ipad = "", compare = ""

		for(let i=0; i < fns.length; i++) {
			let fn = fns[i]
			ipad = (i.toString()).padStart(2)
			let result1 = Math[fn[0]](...fn[1])
			let result2 = fn[3]
			compare = mN

			if (result2 == undefined) {
				compare = mN + ": " + result1
			} else {
				math2.push(i + ": " + result2)
				compare = (result1 == result2 ? mT +": "+ result1 : mF +": "+ result1 + "<br>          "+ so + result2 + sc)
			}
			math0.push(ipad + ":" + compare)
			math1.push(i + ": " + result1)
		}

		dom.hash0.innerHTML = sha1(math0.join()) + so +"["+ math0.length +"]"+sc
		dom.hash1.innerHTML = sha1(math1.join()) + so +"["+ math1.length +"]"+sc
		dom.hash2.innerHTML = sha1(math2.join()) + so +"["+ math2.length +"]"+sc
		dom.mathdata.innerHTML = math0.join("<br>")

}


function rerunVersion() {
	// clear
	let items = document.getElementsByClassName("c mono")
	for(let i=0; i < items.length; i++) {
		items[i].innerHTML = "&nbsp"
	}
	// pause so users see change
	setTimeout(function() {
		outputMath()
	}, 170)
}

outputMath()

</script>
</body>
</html>
